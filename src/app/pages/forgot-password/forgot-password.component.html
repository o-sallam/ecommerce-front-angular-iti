<div class="auth-container">
  <div class="container-fluid">
    <div class="row justify-content-center">
      <div class="col-lg-6 col-xl-5">
        <div class="auth-card">
          <div class="auth-header">
            <h2 class="auth-title">Forgot Password</h2>
            <p class="auth-subtitle" *ngIf="!emailSent">
              Enter your email address and we'll send you a link to reset your password
            </p>
            <p class="auth-subtitle" *ngIf="emailSent">
              Check your email for reset instructions
            </p>
          </div>

          <div class="auth-body">
            <!-- Success Message -->
            <div *ngIf="message" class="alert alert-success mb-3">
              <div class="success-icon mb-2">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <polyline points="22 4 12 14.01 9 11.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              {{ message }}
            </div>

            <!-- Error Message -->
            <div *ngIf="errorMsg" class="alert alert-danger mb-3">
              {{ errorMsg }}
            </div>

            <!-- Email Sent Success State -->
            <div *ngIf="emailSent" class="email-sent-content">
              <div class="email-icon mb-3">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke="#93353E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <polyline points="22 6 12 13 2 6" stroke="#93353E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              
              <h3 class="success-title">Email Sent!</h3>
              <p class="success-description">
                We've sent a password reset link to <strong>{{ forgotPasswordForm.get('email')?.value }}</strong>
              </p>
              
              <div class="success-instructions">
                <p>Please check your email and click the link to reset your password.</p>
                <p class="text-muted">Didn't receive the email? Check your spam folder or try again.</p>
              </div>

              <div class="success-actions">
                <button type="button" class="btn auth-btn-secondary" (click)="resendEmail()" [disabled]="loading">
                  <span *ngIf="!loading">Resend Email</span>
                  <span *ngIf="loading">
                    <i class="fas fa-spinner fa-spin"></i> Sending...
                  </span>
                </button>
                
                <button type="button" class="btn auth-btn-primary" (click)="goToLogin()">
                  Back to Login
                </button>
              </div>
            </div>

            <!-- Forgot Password Form -->
            <form *ngIf="!emailSent" class="auth-form" [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
              <div class="form-floating mb-4">
                <input
                  type="email"
                  class="form-control"
                  id="forgotEmail"
                  placeholder="Email Address"
                  formControlName="email"
                />
                <label for="forgotEmail" class="auth-label">
                  <i class="fas fa-envelope me-2"></i>Email Address
                </label>
                <div *ngIf="forgotPasswordForm.get('email')?.invalid && forgotPasswordForm.get('email')?.touched" class="invalid-feedback d-block">
                  <span *ngIf="forgotPasswordForm.get('email')?.errors?.['required']">Email is required</span>
                  <span *ngIf="forgotPasswordForm.get('email')?.errors?.['email']">Please enter a valid email address</span>
                </div>
              </div>

              <div class="d-grid mb-4">
                <button
                  type="submit"
                  class="btn auth-btn-primary"
                  [disabled]="loading || forgotPasswordForm.invalid"
                >
                  <span *ngIf="!loading">Send Reset Link</span>
                  <span *ngIf="loading">
                    <i class="fas fa-spinner fa-spin"></i> Sending...
                  </span>
                </button>
              </div>

              <div class="auth-footer text-center">
                <p>
                  Remember your password?
                  <a routerLink="/login" class="auth-link">Back to Login</a>
                </p>
                <p>
                  Don't have an account?
                  <a routerLink="/register" class="auth-link">Create Account</a>
                </p>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>